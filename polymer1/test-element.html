<link rel="import" href="./polymer-1.10.0/bower_components/polymer/polymer.html">
<dom-module id="test-element">
  <template>
    <div>
      <p>[[data]]</p>
      <input type="text" value="{{inputDemo::input}}">
      <button on-click="showInputDemo">显示inputDemo</button>
      <content></content>
    </div>
  </template>
  <script>
    Polymer({
      is: "test-element", // is来标示组件的标签名
      // add a callback to the element's prototype
      ready: function() { // ready是组件生命周期的一部分，这块以后会具体开一篇介绍
        // this.textContent = "I'm a proto-element. Check out my prototype!"  //为组件赋上一段文字
        this.set('data', '更改')
        this.set('inputDemo', '你好')
      },
      properties: {
        data: {
          type: String,
          notify: false,
          reflectToAttribute: true,
          value: '以下是index.html中的内容：',
          readOnly: true // readOnly，该属性开启后，data属性会变为只读，只有getter，没有setter
        },
        inputDemo: {
          type: String,
          notify: true, // notify 是一个默认为 false 的属性，当该属性被设为 true 时，则每当该属性的值被改变一次，就会触发一次changed事件，该事件在外部组件中也可以感知到，并可以在 listeners 属性中设定事件相应的监听函数
          reflectToAttribute: true, // reflectToAttribute 是一个默认为 false 属性，当该属性被设为 true 时，该属性会变为组件上的属性出现，在本例中inputDemo会作为input-demo属性出现在test-element标签之上
          observer: 'observeInput' // 该属性和 Vue 中的 watch 属性大抵相似，会在属性更改时触发相对应的方法
        }
      },
      listeners: {
        'data-changed': 'dataChangeHandler',
        'input-demo-changed': 'inputChangeHandler'
      },
      dataChangeHandler (event) {
        console.log('data更改', event)
      },
      inputChangeHandler (event) {
        console.log('输入更改', event)
      },
      showInputDemo () {
        console.log('listeners', this.inputDemo)
      },
      observeInput (newVal, oldVal) {
        console.log('观测', newVal, oldVal)
      }
    })
  </script>
</dom-module>